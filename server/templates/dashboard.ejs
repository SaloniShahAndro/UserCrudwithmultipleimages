<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<link rel="stylesheet" href="/assets/css/common.css" />

<script type="text/javascript" src="../assets/js/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<link rel="stylesheet" href="../assets/js/fancybox/jquery.fancybox-1.3.4.css" />

<% if(!user){ %>
<a href="/register">
    <button type="button">Add User</button>
</a>
<% }else{ %>
    <% if(user.displayName){ %>
    <label>Hello <%= user.displayName %></label>
    <% }else{ %>
        <label>Hello <%= user.name.givenName %> <%= user.name.familyName %> </label>
        <% } %>
    <% } %>

<% if(!user){ %>
<a href="/logout">
    <button type="button">Logout</button>
</a>
<% }else{ %>
    <a href="/logouts">
        <button type="button">Logout</button>
    </a>
    <% } %>

<body>
    <h1>User List</h1>

    <div class="">
        <% if(alluserdataslider.length > 0){ %>
            <table width="100%" class="table responsive " id="tbluser">
                <tbody>
                    <% for(var i=0; i<(alluserdataslider).length; i++) {%>
                        <tr data-id="<%= alluserdataslider[i].id %>">
                            <td style="width:90px; height:90px">
                                <div class="bd_d first" >
                                        <div class="icons-radius">
                                                <% for(var j=0; j<(alluserdataslider[i].profilepics).length; j++) {%>
                                                    <% if(alluserdataslider[i].profilepics[j].profilepicture) { %>
                                                        <% if(j>0){%>
                                                            <a class="grouped_elements" rel="<%= alluserdataslider[i].profilepics[j].user_id %>" style="display:none" href="/assets/multiimage/<%= alluserdataslider[i].profilepics[j].profilepicture %>">
                                                                <img src="/assets/tmp/<%= alluserdataslider[i].profilepics[j].profilepicture %>" id="<%= alluserdataslider[i].id %>" />
                                                            </a>
                                                        <% }else {%>
                                                            <a class="grouped_elements" rel="<%= alluserdataslider[i].profilepics[j].user_id %>" style="display:block" href="/assets/multiimage/<%= alluserdataslider[i].profilepics[j].profilepicture %>">
                                                                <img src="/assets/tmp/<%= alluserdataslider[i].profilepics[j].profilepicture %>" id="<%= alluserdataslider[i].id %>" />
                                                            </a>
                                                            <% } %>
                                                       
                                                        <% } else { %>
                                                            <label>No image</label>
                                                            <% } %>
                                                                <% } %>
                                            </div>
                                </div>


                            </td>

                            <td>
                                <div class="bd_d detail-table">
                                    <h2 class="user_title">
                                        <%= alluserdataslider[i].firstname %>
                                            <%= alluserdataslider[i].lastname %>
                                    </h2>
                                    <p>
                                        <%= alluserdataslider[i].email %>
                                    </p>
                                    <div>
                                        <% if(alluserdataslider[i].status == 'active') { %>
                                            <p>status: Active</p>
                                            <% } else { %>
                                                <p>status: Inactive</p>
                                                <% } %>
                                    </div>

                                </div>
                            </td>
                            <% if(!user){ %>
                            <td width="120" class="tooltip-demo">
                                <div class="bd_d  last">
                                    <div class="table-btn">
                                        <button id="<%= alluserdataslider[i].id %>" class="btn-sm btn btn-outline-red btn-delete" >Delete</button>
                                        <a class="btn btn-default btn-sm" href="/useredit/<%= alluserdataslider[i].id %>">Edit</a>

                                    </div>
                                </div>
                            </td>
                            <% } %>
                        </tr>


                        <% } %>
                </tbody>
            </table>


    </div>
   
    <% if (pages > 0) { %>
        <ul class="pagination text-center">
            <% if (current == 1) { %>
                <li class="disabled"><a>First</a></li>
            <% } else { %>
                <li><a href="/dashboard/1">First</a></li>
            <% } %>
            <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
            <% if (i !== 1) { %>
                <li class="disabled"><a>...</a></li>
            <% } %>
            <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                <% if (i == current) { %>
                    <li class="active"><a><%= i %></a></li>
                <% } else { %>
                     <li><a href="/dashboard/<%= i %>"><%= i %></a></li>
                <% } %>
                <% if (i == Number(current) + 4 && i < pages) { %>
                    <li class="disabled"><a>...</a></li>
                <% } %>
            <% } %>
            <% if (current == pages) { %>
                <li class="disabled"><a>Last</a></li>
            <% } else { %>
                <li><a href="/dashboard/<%= pages %>">Last</a></li>
            <% } %>
        </ul>
    <% } %>
    <% } else { %>
        <label>No data available</label>
        <% }%>

    </div>


    <br>


    <script type="text/javascript">
        $(document).ready(function () {
            $("a.grouped_elements").fancybox();

//             ('#tbluser').pagination({
//     dataSource: [1, 2, 3, 4, 5, 6, 7, ... 100],
//     pageSize: 4,
//     showPrevious: false,
//     showNext: false,
//     callback: function(data, pagination) {
//         // template method of yourself
//         var html = template(data);
//         console.log(">>html",html)
//         dataContainer.html(html);
//     }
// })

            $(".btn-delete").click(function () {
                y = confirm('Do you want to delete?');
                var id = $(this).attr('id')
                

                if (!y) {
                    return false;
                } else {
                    $.ajax({
                        method: 'GET',
                        url: '/user/delete/' + id,
                        success: function (result) {
                            console.log("delted", id)
                            location.reload();
                        }
                    })
                }
            })

        })

    </script>
</body>